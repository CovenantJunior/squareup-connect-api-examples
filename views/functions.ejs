<%

formatTime = function(durationInMs) {
  const duration = Number(durationInMs);

  // We want to convert milliseconds into human readable text (e.g. 2 hours 3 mins)

  const seconds = Math.floor((duration / 1000) % 60);
  // TODO: what happens if granularity level is of a second? might need carried rounding.
  const minutes = Math.floor(duration / (1000 * 60) % 60);
  const hours = Math.floor(duration / (1000 * 60 * 60) % 24);

  console.log(seconds);
  console.log(minutes);
  console.log(hours);

  let msg = [];
  if (hours > 0) {
    msg.push(hours);
    msg.push((hours > 1) ? "hours" : "hour");
  }

  if (minutes > 0) {
    msg.push(minutes);
    msg.push((minutes > 1) ? "mins" : "min");
  }

  return msg.join(" ");
}

formatMoney = function(value, currency) {
  let valueAsNumber = Number(value);
  // Create number formatter.
  const props = {
    style: 'currency',
    currency: currency,
    minimumFractionDigits: 2
  };
  // If the value is an integer, show no decimal digits.
  if (valueAsNumber % 1 == 0) {
    props.minimumFractionDigits = 0;
  }
  
  // Some currencies don't need to use higher denominations to represent values.
  if (currency !== "JPY") {
    valueAsNumber /= 100.0;
  }
  var formatter = new Intl.NumberFormat('en-US', props);
  return formatter.format(valueAsNumber);
}
%>